function remind_password(a){if(close_login_box(),a){var e=$("#r_email").val();$.post(global_data.url+"/recover-pass.php","r_email="+e,function(a){mydialog.alert("0"==a.charAt(0)?"Opps!":"Hecho",a.substring(3),!1),mydialog.center()})}else{var t="";t+='<div style="padding:0 35px;" id="AFormInputs">',t+='<div class="form-line">',t+='<label for="r_email">Correo electr&oacute;nico:</label>',t+='<input type="text" tabindex="1" name="r_email" id="r_email" maxlength="35"/>',t+="</div>",t+="</div>",mydialog.class_aux="registro",mydialog.show(!0),mydialog.title("Recuperar Contrase&ntilde;a"),mydialog.body(t),mydialog.buttons(!0,!0,"Continuar","javascript:remind_password(true)",!0,!0,!0,"Cancelar","close",!0,!1),mydialog.center()}}function resend_validation(a){if(close_login_box(),a){var e=$("#r_email").val();$("#loading").fadeIn(250),$.post(global_data.url+"/recover-validation.php","r_email="+e,function(a){mydialog.alert("0"==a.charAt(0)?"Opps!":"Hecho",a.substring(3),!1),mydialog.center(),$("#loading").fadeOut(350)})}else{var t="";t+='<div style="padding:0 35px;" id="AFormInputs">',t+='<div class="form-line">',t+='<label for="r_email">Correo electr&oacute;nico:</label>',t+='<input type="text" tabindex="1" name="r_email" id="r_email" maxlength="35"/>',t+="</div>",t+="</div>",mydialog.class_aux="registro",mydialog.show(!0),mydialog.title("Reenviar validaci&oacute;n"),mydialog.body(t),mydialog.buttons(!0,!0,"Reenviar","javascript:resend_validation(true)",!0,!0,!0,"Cancelar","close",!0,!1),mydialog.center()}}function spoiler(a){$(a).toggleClass("show").parent().next().slideToggle()}function moreEmoticons(a){var e=$("#emoticons");$("#loading").fadeIn(250),$.ajax({type:"GET",url:global_data.url+"/emoticones.php",data:"ts=false",success:function(t){a&&$(e).css({marginTop:"1em"}),$(e).append(t),$("#moreemofn").hide(),$("#loading").fadeOut(350)}})}var denuncia={nueva:function(a,e,t,o){$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/denuncia-"+a+".php",data:"obj_id="+e+"&obj_title="+t+"&obj_user="+o,success:function(t){denuncia.set_dialog(t,e,a),$("#loading").fadeOut(350)}})},set_dialog:function(a,e,t){var o="Denunciar "+t;mydialog.mask_close=!1,mydialog.close_button=!0,mydialog.show(),mydialog.title(o),mydialog.body(a),mydialog.buttons(!0,!0,"Enviar","denuncia.enviar("+e+", '"+t+"')",!0,!0,!0,"Cancelar","close",!0,!1),mydialog.center()},enviar:function(a,e){var t=$("select[name=razon]").val(),o=$("textarea[name=extras]").val();$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/denuncia-"+e+".php",data:"obj_id="+a+"&razon="+t+"&extras="+o,success:function(a){switch(a.charAt(0)){case"0":mydialog.alert("Error",'<div class="emptyData">'+a.substring(3)+"</div>");break;case"1":mydialog.alert("Bien",'<div class="emptyData">'+a.substring(3)+"</div>")}$("#loading").fadeOut(350)}})}},comentario={cache:{},cargado:!1,cargar:function(a,e,t){$("#com_gif").show(),$("div#comentarios").css("opacity",.4),"undefined"==typeof comentario.cache["c_"+e]?($("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/comentario-ajax.php?page="+e,data:"postid="+a+"&autor="+t,success:function(o){comentario.cache["c_"+e]=o,$("#comentarios").html(o),comentario.set_pages(a,e,t),$("#loading").fadeOut(350)}})):($("#comentarios").html(comentario.cache["c_"+e]),$(".paginadorCom").html(comentario.cache["p_"+e]),$("#com_gif").hide(),$("div#comentarios").css("opacity",1))},set_pages:function(a,e,t){var o=parseInt($("#ncomments").text());$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/comentario-pages.php?page="+e,data:"postid="+a+"&autor="+t+"&total="+o,success:function(a){comentario.cache["p_"+e]=a,$(".paginadorCom").html(a),$("#com_gif").hide(),$("div#comentarios").css("opacity",1),$("#loading").fadeOut(350)}})},nuevo:function(a,e){$("#btnsComment").attr({disabled:"disabled"});var t=$("#body_comm"),o=t.val();if(""==o||o==t.attr("title"))return t.focus(),void $("#btnsComment").attr({disabled:""});if(o.length>1500)return alert("Tu comentario no puede ser mayor a 1500 caracteres."),t.focus(),void $("#btnsComment").attr({disabled:""});$(".miComentario #gif_cargando").show();var i=$("#auser_post").val();$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/comentario-agregar.php",data:"comentario="+encodeURIComponent(o)+"&postid="+gget("postid")+"&mostrar_resp="+a+"&auser="+i,success:function(a){switch(a.charAt(0)){case"0":$(".miComentario .error").html(a.substring(3)).show("slow"),$("#btnsComment").attr({disabled:""});break;case"1":$("#nuevos").slideUp(1),$("#preview").remove(),$("#nuevos").html(a.substring(3)).slideDown("slow",function(){$("#no-comments").hide("slow"),$(".miComentario").html('<div class="emptyData">Tu comentario fue agregado correctamente :)</div>')});var e=parseInt($("#ncomments").text());$("#ncomments").text(e+1)}$("#loading").fadeOut(350),$(".miComentario #gif_cargando").hide(),mydialog.close()}})},preview:function(a,e){var t="new"==e?$("#"+a):$("#edit-comment-"+a),o=t.val(),i="new"==e?"Enviar comentario":"Guardar",n="new"==e?"comentario.nuevo('true')":"comentario.editar("+a+", 'send')";if(""==o||o==t.attr("title"))return void t.focus();if(o.length>1500)return alert("Tu comentario no puede ser mayor a 1500 caracteres."),void t.focus();var l=$("#auser_post").val();$(".miComentario #gif_cargando").show(),mydialog.class_aux="preview",mydialog.show(!0),mydialog.title("..."),mydialog.body('Cargando vista previa....<br><br><img src="'+global_data.url+'/themes/default/images/loading_bar.gif">'),mydialog.center(),$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/comentario-preview.php?type="+e,data:"comentario="+encodeURIComponent(o)+"&auser="+l,success:function(t){switch(t.charAt(0)){case"0":"new"==e?$(".miComentario .error").html(t.substring(3)).show("slow"):($("#edit-error-"+a).css("color","red").html(t.substring(3)),mydialog.close()),$(".miComentario #gif_cargando").hide();break;case"1":mydialog.body(t.substring(3)),mydialog.buttons(!0,!0,i,n,!0,!0,!0,"Cancelar","close",!0,!1),mydialog.center(),$(".miComentario #gif_cargando").hide(),$(".miComentario .error").html("")}$("#loading").fadeOut(350),mydialog.center()}})},votar:function(a,e){var t=$("#votos_total_"+a),o=parseInt(t.text());o=isNaN(o)?0:o,e=1==e?1:-1,$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/comentario-votar.php",data:"voto="+e+"&cid="+a+"&postid="+gget("postid"),success:function(i){switch(i.charAt(0)){case"0":mydialog.alert("Error al votar",i.substring(3));break;case"1":o+=e,o>0&&(o="+"+o);var n=0>o?"negativo":"positivo";$("#ul_cmt_"+a+" > .numbersvotes").show(),t.text(o).removeClass("positivo, negativo").addClass(n),$("#ul_cmt_"+a).find(".icon-thumb-up, .icon-thumb-down").hide()}$("#loading").fadeOut(350)}})},citar:function(a,e){var t=$("#body_comm");t.focus(),t.val((""!=t.val()?t.val()+"\n":"")+"[quote="+e+"]"+htmlspecialchars_decode($("#citar_comm_"+a).html(),"ENT_NOQUOTES")+"[/quote]\n")},editar:function(a,e){switch(e){case"show":var t=htmlspecialchars_decode($("#citar_comm_"+a).html(),"ENT_NOQUOTES"),o='<textarea id="edit-comment-'+a+'" class="textarea-edit autogrow" title="Escribir un comentario..." onfocus="onfocus_input(this)" onblur="onblur_input(this)">'+t+'</textarea><br/><input type="button" class="boton" onclick="comentario.preview(\''+a+'\', \'edit\')" value="Continuar &raquo;"/> <strong id="edit-error-'+a+'"></strong>';$("#comment-body-"+a).html(o),$("#edit-comment-"+a).css("max-height","300px").autogrow();break;case"send":var i=($("#edit-cid-"+a).val(),$("#edit-comment-"+a).val());$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/comentario-editar.php",data:"comentario="+encodeURIComponent(i)+"&cid="+a,success:function(e){switch(e.charAt(0)){case"0":$("#edit-error-"+a).css("color","red").html(e.substring(3));break;case"1":$("#comment-body-"+a).html($("#new-com-html").html());var t=htmlspecialchars_decode($("#new-com-bbcode").html(),"ENT_NOQUOTES");$("#citar_comm_"+a).html(t)}$("#loading").fadeOut(350),mydialog.close()}})}}},afiliado={vars:Array(),nuevo:function(){var a="";a+='<div class="emptyData" style="margin-bottom:10px" id="AFStatus"><span>Ingresa los datos de tu web para afiliarte.</span></div>',a+='<div style="padding:0 35px;" id="AFormInputs">',a+='<div class="form-line">',a+='<label for="atitle">T&iacute;tulo</label>',a+='<input type="text" tabindex="1" name="atitle" id="atitle" maxlength="35"/>',a+="</div>",a+='<div class="form-line">',a+='<label for="aurl">Direcci&oacute;n</label>',a+='<input type="text" tabindex="2" name="aurl" id="aurl" value="http://"/>',a+="</div>",a+='<div class="form-line">',a+='<label for="aimg">Banner <small>(216x42px)</small></label>',a+='<input type="text" tabindex="3" name="aimg" id="aimg" value="http://"/>',a+="</div>",a+='<div class="form-line">',a+='<label for="atxt">Descripci&oacute;n</label>',a+='<textarea tabindex="4" rows="10" name="atxt" id="atxt" style="height:60px; width:295px"></textarea>',a+="</div>",a+='<div class="form-line">',a+='<label for="aID">RefID <a href="#" onclick="$(this).parent().parent().find(',a+="'span').css({display: 'block'}); return false",a+='"><img src="'+global_data.img+'/images/icons/help.png"/></a></label><span style="display:none; margin-bottom:5px">Si utilizas <a href="http://www.tscript.in/"><b>T!Script</b></a> y ya nos enlazaste, ingresa el ID generado en tu panel de adminsitraci&oacute;n.</span>',a+='<input type="text" tabindex="5" name="aID" id="aID" value="" style="width:100px!important"/>',a+="</div>",a+="</div>",mydialog.class_aux="registro",mydialog.mask_close=!1,mydialog.close_button=!0,mydialog.show(!0),mydialog.title("Nueva Afiliaci&oacute;n"),mydialog.body(a),mydialog.buttons(!0,!0,"Enviar","afiliado.enviar(0)",!0,!0,!0,"Cancelar","close",!0,!1),mydialog.center()},enviar:function(){var a=$("#AFormInputs :input"),e=!0,t="";a.each(function(){var a=$(this).val();"aID"==$(this).attr("name")&&(a="0"),1==e&&(t+=$(this).attr("name")+"="+a+"&")}),1==e&&(mydialog.procesando_inicio("Enviando...","Nueva Afiliaci&oacute;n"),afiliado.enviando(t))},enviando:function(a){$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/afiliado-nuevo.php",data:a,success:function(a){switch(mydialog.procesando_fin(),a.charAt(0)){case"0":$("#AFStatus > span").fadeOut().text("La URL es incorrecta").fadeIn();break;case"1":mydialog.body(a.substring(3)),mydialog.buttons(!0,!0,"Aceptar","mydialog.close()",!0,!0);break;case"2":$("#AFStatus > span").fadeOut().text("Faltan datos").fadeIn()}mydialog.center(),$("#loading").fadeOut(350)}})},detalles:function(a){$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/afiliado-detalles.php",data:"ref="+a,success:function(a){mydialog.class_aux="",mydialog.show(!0),mydialog.title("Detalles"),mydialog.body(a),mydialog.buttons(!0,!0,"Aceptar","mydialog.close()",!0,!0),mydialog.center(),$("#loading").fadeOut(350)}})}},imagenes={total:0,move:"-250px",presentacion:function(){$("#imContent").animate({top:"0px"},1e3,"easeOutQuad",function(){$("#imContent").css({top:imagenes.move});for(var a=$("#img_"+imagenes.total).html(),e=imagenes.total;e>=0;e--)$("#img_"+e).html($("#img_"+(e-1)).html());$("#img_0").html(a),setTimeout("imagenes.presentacion()",5e3)})}},news={total:0,count:1,slider:function(){news.total>1&&(news.count<news.total?news.count++:news.count=1,$("#top_news > li").hide(),$("#new_"+news.count).fadeIn(),setTimeout("news.slider()",7e3))}};$(document).ready(function(){news.total=$("#top_news > li").size(),news.slider(),imagenes.presentacion(),$(".hovercard").tooltip({offset:[-50,-30],content:"uid"}),$(".vctip").tipsy({gravity:"n"})}),$(document).ready(function(){$("#c_nick").fadeOut(0),$("#dar_puntos").fadeOut(0),$("#c_medalla").fadeOut(0),$("#n_rango").fadeOut(0),$("#articulos").change(function(){var a=$("#articulos option:selected").val();"1"==a&&($("#dar_puntos").fadeOut(0),$("#c_nick").fadeIn(0),$("#c_medalla").fadeOut(0),$("#n_rango").fadeOut(0)),"2"==a&&($("#c_nick").fadeOut(0),$("#c_medalla").fadeOut(0),$("#dar_puntos").fadeIn(0),$("#n_rango").fadeOut(0)),"3"==a&&($("#c_nick").fadeOut(0),$("#dar_puntos").fadeOut(0),$("#c_medalla").fadeIn(0)),$("#n_rango").fadeOut(0),"4"==a&&($("#c_nick").fadeOut(0),$("#dar_puntos").fadeOut(0),$("#c_medalla").fadeOut(0),$("#n_rango").fadeIn(0))})});