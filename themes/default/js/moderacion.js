var mod={posts:{view:function(o){$("#loading").fadeIn(250),$.ajax({type:"post",url:global_data.url+"/moderacion-posts.php?do=view",data:"postid="+o,success:function(o){mydialog.class_aux="preview",mydialog.show(!0),mydialog.title("..."),mydialog.body(o),mydialog.buttons(!0,!0,"Cerrar","close",!0,!1),mydialog.center(),$("#loading").fadeOut(350)}})},ocultar:function(o){var a=$("#d_razon").val();return a.length<1?(mydialog.alert("Error","Introduzca una raz&oacute;n"),void a.focus()):a.length>50?(mydialog.alert("Error","La raz&oacute;n debe tener menos de 50 letras."),void a.focus()):void $.post(global_data.url+"/moderacion-posts.php?do=ocultar","razon="+a+"&pid="+o,function(o){mydialog.alert("0"==o.charAt(0)?"Opps!":"Hecho",o.substring(3),!0),mydialog.center()})},borrar:function(o,a,r){if(r){mydialog.procesando_inicio("Eliminando...","Borrar Post");var d=$("#razon").val(),e=$("input[name=razon_desc]").val();if($("#send_b").attr("checked"))var t="yes";$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/moderacion-posts.php?do=borrar",data:"postid="+o+"&razon="+d+"&razon_desc="+e+"&send_b="+t,success:function(r){switch(r.charAt(0)){case"0":mydialog.alert("Error",r.substring(3));break;case"1":"true"==a?mod.redirect("/moderacion/posts",1200):"posts"==a?(mydialog.alert("Aviso",r.substring(3)),mod.redirect("/posts/",2e3)):(mydialog.close(),$("#report_"+o).slideUp())}$("#loading").fadeOut(350)},complete:function(){mydialog.procesando_fin(),$("#loading").fadeOut(350)}})}else $("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/moderacion-posts.php?do=borrar",success:function(r){mydialog.show(),mydialog.title("Borrar Post"),mydialog.body(r),mydialog.buttons(!0,!0,"Borrar","mod.posts.borrar("+o+", '"+a+"', 1);",!0,!1,!0,"Cancelar","close",!0,!0),$("#modalBody").css("padding","20px 10px 0"),mydialog.center(),$("#loading").fadeOut(350)}})}},mps:{borrar:function(o,a){a?($("#loading").fadeIn(250),$.post(global_data.url+"/moderacion-mps.php?do=borrar","mpid="+o,function(a){mydialog.alert("0"==a.charAt(0)?"Opps!":"Hecho",a.substring(3),!1),mydialog.center(),$("#report_"+o).fadeOut(),$("#loading").fadeOut(350)})):(mydialog.show(),mydialog.title("Borrar Mensaje"),mydialog.body("&#191;Quiere eliminar <b>toda</b> la conversaci&oacute;n?"),mydialog.buttons(!0,!0,"S&iacute;","mod.mps.borrar("+o+", 1)",!0,!1,!0,"No","close",!0,!0),mydialog.center())}},users:{action:function(o,a,r){var d="aviso"==a?"Enviar":"Suspender",e="aviso"==a?"Enviar Aviso/Alerta":"Suspender usuario";mod.load_dialog("/moderacion-users.php?do="+a,"uid="+o,e,d,"mod.users.set_"+a+"("+o+", "+r+");")},set_aviso:function(o,a){var r=$("#mod_type").val(),d=$("#mod_subject").val(),e=$("#mod_body").val();mod.send_data("/moderacion-users.php?do=aviso","uid="+o+"&av_type="+r+"&av_subject="+d+"&av_body="+e,o,a)},set_ban:function(o,a){var r=$("#mod_time").val(),d=$("#mod_cant").val(),e=$("#mod_causa").val();mod.send_data("/moderacion-users.php?do=ban","uid="+o+"&b_time="+r+"&b_cant="+d+"&b_causa="+e,o,"'"+a+"'")}},load_dialog:function(o,a,r,d,e){$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+o,data:a,success:function(o){mydialog.show(),mydialog.title(r),mydialog.body(o),mydialog.buttons(!0,!0,d,e,!0,!1,!0,"Cancelar","close",!0,!0),$("#loading").fadeOut(350)},complete:function(){mydialog.center()}})},send_data:function(o,a,r,d){$("#loading").fadeIn(250),mydialog.procesando_inicio("Procesando...","Espere"),$.ajax({type:"POST",url:global_data.url+o,data:a,success:function(o){switch(o.charAt(0)){case"0":mydialog.alert("Error",o.substring(3));break;case"1":mydialog.alert("Aviso",o.substring(3)),"true"==d?mod.redirect("/moderacion/"+type,1200):"false"==d&&$("#report_"+r).slideUp()}$("#loading").fadeOut(350)},complete:function(){mydialog.procesando_fin(),$("#loading").fadeOut(350)}})},reboot:function(o,a,r,d){$("#loading").fadeIn(250),$.ajax({type:"post",url:global_data.url+"/moderacion-"+a+".php?do="+r,data:"id="+o,success:function(r){switch(r.charAt(0)){case"0":mydialog.alert("Error",r.substring(3));break;case"1":mydialog.alert("Aviso",'<div class="dialog_box">'+r.substring(3)+"</div>"),$("#report_"+o).fadeOut(),d&&(d?mod.redirect("/moderacion/"+a,1200):$("#report_"+o).slideUp())}$("#loading").fadeOut(350)}})},redirect:function(o,a){setTimeout(function(){document.location.href=global_data.url+o},a)}};