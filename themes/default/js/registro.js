function redireccionar(){location.href=global_data.url+"/cuenta/"}var registro={banned_passwords:["111111","11111111","112233","121212","123123","123456","1234567","12345678","131313","232323","654321","666666","696969","777777","7777777","8675309","987654","aaaaaa","abc123","abc123","abcdef","abgrtyu","access","access14","action","admin","albert","alexis","amanda","amateur","andrea","andrew","angela","angels","animal","anthony","apollo","apples","arsenal","arthur","asdfgh","asdfgh","ashley","asshole","august","austin","badboy","bailey","banana","barney","baseball","batman","beaver","beavis","bigcock","bigdaddy","bigdick","bigdog","bigtits","birdie","bitches","biteme","blazer","blonde","blondes","blowjob","blowme","bond007","bonnie","booboo","booger","boomer","boston","brandon","brandy","braves","brazil","bronco","broncos","bulldog","buster","butter","butthead","calvin","camaro","cameron","canada","captain","carlos","carter","casper","charles","charlie","cheese","chelsea","chester","chicago","chicken","cocacola","coffee","college","compaq","computer","cookie","cooper","corvette","cowboy","cowboys","crystal","cumming","cumshot","dakota","dallas","daniel","danielle","debbie","dennis","diablo","diamond","doctor","doggie","dolphin","dolphins","donald","dragon","dreams","driver","eagle1","eagles","edward","einstein","erotic","extreme","falcon","fender","ferrari","fewfew","firebird","fishing","florida","flower","flyers","football","forever","freddy","freedom","fucked","fucker","fucking","fuckme","fuckyou","gandalf","gateway","gators","gemini","george","giants","ginger","golden","golfer","gordon","gregory","guitar","gunner","hammer","hannah","hardcore","harley","heather","helpme","hentai","hockey","hooters","horney","hotdog","hunter","hunting","iceman","iloveyou","internet","iwantu","jackie","jackson","jaguar","jasmine","jasper","jennifer","jeremy","jessica","johnny","johnson","jordan","joseph","joshua","junior","justin","killer","knight","ladies","lakers","lauren","leather","legend","letmein","letmein","little","london","lovers","maddog","madison","maggie","magnum","marine","marlboro","martin","marvin","master","matrix","matthew","maverick","maxwell","melissa","member","mercedes","merlin","michael","michelle","mickey","midnight","miller","mistress","moderador","monica","monkey","monkey","monster","morgan","mother","mountain","muffin","murphy","mustang","naked","nascar","nathan","naughty","ncc1701","newyork","nicholas","nicole","nipple","nipples","oliver","orange","packers","panther","panties","parker","password","password","password1","password12","password123","patrick","peaches","peanut","pepper","phantom","phoenix","player","please","pookie","porsche","prince","princess","private","purple","pussies","qazwsx","qwerty","qwertyui","rabbit","rachel","racing","raiders","rainbow","ranger","rangers","rebecca","redskins","redsox","redwings","richard","robert","rocket","rosebud","runner","rush2112","russia","samantha","sammy","samson","sandra","saturn","scooby","scooter","scorpio","scorpion","secret","sexsex","shadow","shannon","shaved","sierra","silver","skippy","slayer","smokey","snoopy","soccer","sophie","spanky","sparky","spider","squirt","srinivas","startrek","starwars","steelers","steven","sticky","stupid","success","suckit","summer","sunshine","superman","surfer","swimming","sydney","taylor","tennis","teresa","tester","testing","theman","thomas","thunder","thx1138","tiffany","tigers","tigger","tomcat","topgun","toyota","travis","trouble","trustno1","tucker","turtle","twitter","united","vagina","victor","victoria","viking","voodoo","voyager","walter","warrior","welcome","whatever","william","willie","wilson","winner","winston","winter","wizard","xavier","xxxxxx","xxxxxxxx","yamaha","yankee","yankees","yellow","zxcvbn","zxcvbnm","zzzzzz"],dialog:!0,paso_actual:1,datos:new Array,datos_status:new Array,datos_text:new Array,no_requerido:new Array,errores:new Array,cache:new Array,times:new Array,times_sets:new Array,focus:function(s){var t=$(s).attr("name");switch(t){case"password":$(s).select();var e=$("#RegistroForm #password2");this.hide_status(e,"empty","El campo es requerido"),$(e).val("")}$(s).addClass("selected"),this.show_status(s,"info",$(s).attr("title"),!0)},blur:function(s){var t=$(s).attr("name");switch(t){case"nick":case"email":this.clear_time(t),$(s).removeClass("selected"),this.check_campo(s,!1,!0);break;default:$(s).removeClass("selected"),this.check_campo(s,!1,!0)}},set_time:function(s){return this.times_sets[s]?!1:(this.times_sets[s]=!0,void(this.times[s]=setTimeout("registro.time('"+s+"')",1e3)))},clear_time:function(s){return this.times_sets[s]?(this.times_sets[s]=!1,void clearTimeout(this.times[s])):!1},time:function(s){var t=$("#RegistroForm #"+s);empty($(t).val())?this.show_status(t,"info",$(t).attr("title"),!0):this.check_campo(t,!1,!0)},check_campo:function(s,t,e){var a=$(s).attr("name"),r=$(s).val();switch(a){case"nick":if(!e&&this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos[a]=r,empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}if(r.length<4||r.length>16)return this.show_status(s,"error","Debe tener entre 4 y 16 caracteres");if(!/[^0-9]/.test(r))return this.show_status(s,"error","No puede contener solo numeros");if(/[^a-zA-Z0-9_]/.test(r))return this.show_status(s,"error","S&oacute;lo se permiten letras, n&oacute;meros y guiones(_)");var n=r.toLowerCase();if(this.cache[a]){if(this.cache[a][n])return this.cache[a][n].status?registro.show_status(s,"ok",this.cache[a][n].text):registro.show_status(s,"error",this.cache[a][n].text)}else this.cache[a]=new Array,this.cache[a][n]=new Array;this.show_status(s,"loading","Comprobando nick..."),$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/registro-check-nick.php?t=nombre de usuario",data:"nick="+r,success:function(t){switch(registro.cache[a][n]=new Array,registro.cache[a][n].text=t.substring(3),t.charAt(0)){case"0":registro.cache[a][n].status=!1,registro.show_status(s,"error",t.substring(3));break;case"1":registro.cache[a][n].status=!0,registro.show_status(s,"ok",t.substring(3))}$("#loading").fadeOut(350)},error:function(){registro.show_status(s,"error","Hubo un error al intentar procesar lo solicitado"),registro.datos[a]=""}});break;case"password":if(!e&&this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos[a]=r,empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}return-1!=$.inArray(r.toLowerCase(),this.banned_passwords)?this.show_status(s,"error","Ingresa una contrase&ntilde;a m&aacute;s segura"):r===this.datos.nick?this.show_status(s,"error","La contrase&ntilde;a tiene que ser distinta que el nick"):r.length<5||r.length>35?this.show_status(s,"error","Debe tener entre 5 y 35 caracteres"):this.show_status(s,"ok","OK");case"password2":if(empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}return r!==this.datos.password?(this.show_status($("#RegistroForm #password"),"error","Las contrase&ntilde;as deben ser iguales"),this.show_status(s,"error","Las contrase&ntilde;as deben ser iguales")):this.show_status(s,"ok","OK");case"email":if(r=r.toLowerCase(),!e&&this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos[a]=r,empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}if(r.length>35)return this.show_status(s,"error","El email es demasiado largo");if(!/^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]{2,3})$/.exec(r))return this.show_status(s,"error","El formato es incorrecto");if(this.cache[a]){if(this.cache[a][r])return this.cache[a][r].status?registro.show_status(s,"ok",this.cache[a][r].text):registro.show_status(s,"error",this.cache[a][r].text)}else this.cache[a]=new Array,this.cache[a][r]=new Array;this.show_status(s,"loading","Comprobando email..."),$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/registro-check-email.php?t=email",data:"email="+r,success:function(t){switch(registro.cache[a][r]=new Array,registro.cache[a][r].text=t.substring(3),t.charAt(0)){case"0":registro.cache[a][r].status=!1,registro.show_status(s,"error",t.substring(3));break;case"1":registro.cache[a][r].status=!0,registro.show_status(s,"ok","OK")}$("#loading").fadeOut(350)},error:function(){registro.show_status(s,"error","Hubo un error al intentar procesar lo solicitado"),registro.datos[a]="",$("#loading").fadeOut(350)}});break;case"dia":case"mes":case"anio":if(this.datos.dia=$("#RegistroForm #dia").val(),this.datos.mes=$("#RegistroForm #mes").val(),this.datos.anio=$("#RegistroForm #anio").val(),empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}if(empty(this.datos.dia)||empty(this.datos.mes)||empty(this.datos.anio)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}return checkdate(this.datos.mes,this.datos.dia,this.datos.anio)?this.show_status(s,"ok","OK"):this.show_status(s,"error","La fecha es incorrecta");case"sexo":if(r=$("#RegistroForm #sexo_f").is(":checked")||$("#RegistroForm #sexo_m").is(":checked")?$("#RegistroForm #sexo_f").is(":checked")?"f":"m":"",this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos[a]=r,empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}return this.show_status(s,"ok","OK");case"pais":if(!e&&this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos[a]=r,this.datos.estado="",this.hide_status($("#RegistroForm #estado"),"empty","OK"),$("#RegistroForm #estado").attr("disabled","disabled").val(""),empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}this.show_status(s,"ok","OK"),$("#RegistroForm .pasoDos #estado").html("").append('<option value="" selected="selected">Regi&oacute;n</option>'),this.show_status($("#RegistroForm .pasoDos #estado"),"loading","Obteniendo..."),$("#loading").fadeIn(250),$.ajax({type:"GET",url:global_data.url+"/registro-geo.php",data:"pais_code="+r,success:function(t){switch(t.charAt(0)){case"0":registro.show_status(s,"error",t.substring(3));break;case"1":registro.no_requerido.estado=!1,registro.show_status(s,"ok","OK"),$("#RegistroForm .pasoDos #estado").append(t.substring(3)).removeAttr("disabled").val("").focus()}$("#loading").fadeOut(350)},error:function(){registro.show_status(s,"error","Hubo un error al intentar procesar lo solicitado"),registro.datos[a]="",$("#loading").fadeOut(350)}});break;case"estado":if(this.no_requerido[a])return this.hide_status(s,this.datos_status[a],this.datos_text[a]),!0;if(!e&&this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos.estado=r,empty(r)){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}this.show_status(s,"ok","OK");break;case"terminos":var r=$(s).is(":checked");if(!e&&this.datos[a]===r)return"empty"==this.datos_status[a]?t?this.show_status(s,this.datos_status[a],this.datos_text[a]):this.hide_status(s,this.datos_status[a],this.datos_text[a]):this.show_status(s,this.datos_status[a],this.datos_text[a]);if(this.datos[a]=r,!r){var o="empty",i="El campo es requerido";return t?this.show_status(s,o,i):this.hide_status(s,o,i)}return registro.show_status(s,"ok","OK");case"g-recaptcha-response":return this.datos[a]=r,r?registro.show_status($("#RegistroForm .g-recaptcha"),"ok","OK"):this.show_status($("#RegistroForm .g-recaptcha"),"empty","Demuestra que no eres un robot")}},show_status:function(s,t,e,a){var r=$(s).attr("name"),o="empty"==t?"error":t;if("recaptcha_response_field"==r)s=$("#RegistroForm .pasoDos .help.recaptcha");else do s=$(s).next();while(!$(s).is(".help"));return $(s).removeClass("ok").removeClass("error").removeClass("info").removeClass("loading").addClass(o).show().children().children().html(e),a||(this.datos_status[r]=t,this.datos_text[r]=e),"ok"==o},hide_status:function(s,t,e){var a=$(s).attr("name");if("recaptcha_response_field"==a)s=$("#RegistroForm .pasoDos .help.recaptcha");else do s=$(s).next();while(!$(s).is(".help"));return $(s).hide(),this.datos_status[a]=t,this.datos_text[a]=e,"ok"==t},check_paso:function(){switch(this.paso_actual){case 1:var s=!0,t=$("#RegistroForm .pasoUno :input");return t.each(function(){registro.check_campo(this,!0)||(s=!1)}),s;case 2:var s=!0,t=$("#RegistroForm .pasoDos :input");return t.each(function(){registro.check_campo(this,!0)||(s=!1)}),s}return!0},change_paso:function(s,t){if(s>this.paso_actual&&!this.check_paso())return!1;switch(s){case 1:$("#RegistroForm .pasoDos").hide(),$("#RegistroForm .pasoUno").show(),this.dialog?mydialog.buttons(!0,!0,"Siguiente &raquo;","registro.change_paso(2)",!0,!1,!1):($(".reg-login .registro #buttons #sig").css("display","inline-block"),$(".reg-login .registro #buttons #term").hide()),t||$("#RegistroForm .pasoUno input:first").focus();break;case 2:$("#RegistroForm .pasoUno").hide(),$("#RegistroForm .pasoDos").show(),this.dialog?(mydialog.buttons(!0,!0,"Terminar","registro.submit()",!0,!1),$("#mydialog #buttons .mBtn.btnOk").removeClass("btnCancel").addClass("btnGreen")):($(".reg-login .registro #buttons #sig").hide(),$(".reg-login .registro #buttons #term").css("display","inline-block")),t||$("#RegistroForm .pasoDos input:first").focus()}this.dialog&&mydialog.center(),this.paso_actual=s},submit:function(){if(!this.check_paso())return!1;$("#RegistroForm .help").hide();var s="",t="";for(var e in this.datos)s+=t+e+"="+encodeURIComponent(this.datos[e]),t="&";this.dialog&&mydialog.procesando_inicio("Enviando...","Registro"),$("#loading").fadeIn(250),$.ajax({type:"POST",url:global_data.url+"/registro-nuevo.php",data:s,success:function(s){var t=s.substring(0,strpos(s,":"));switch(("1"!=t||"2"!=t)&&(registro.datos["g-recaptcha-response"]="",grecaptcha.reset()),s.substring(0,strpos(s,":"))){case"0":break;case"nick":registro.change_paso(1,!0),registro.show_status($("#RegistroForm #nick"),"error",s.substring(strpos(s,":")+2));break;case"password":registro.change_paso(1,!0),registro.show_status($("#RegistroForm #password"),"error",s.substring(strpos(s,":")+2)),registro.datos.password="";break;case"email":registro.change_paso(1,!0),registro.show_status($("#RegistroForm #email"),"error",s.substring(strpos(s,":")+2));break;case"nacimiento":registro.change_paso(1,!0),registro.show_status($("#RegistroForm #anio"),"error",s.substring(strpos(s,":")+2));break;case"sexo":registro.change_paso(2,!0),registro.show_status($("#RegistroForm #sexo_f"),"error",s.substring(strpos(s,":")+2));break;case"pais":registro.change_paso(2,!0),registro.show_status($("#RegistroForm #pais"),"error",s.substring(strpos(s,":")+2));break;case"estado":registro.change_paso(2,!0),registro.show_status($("#RegistroForm #estado"),"error",s.substring(strpos(s,":")+2));break;case"recaptcha":registro.change_paso(2,!0),registro.show_status($("#RegistroForm .g-recaptcha"),"error",s.substring(strpos(s,":")+2));break;case"1":registro.dialog?(mydialog.body(s.substring(strpos(s,":")+2)),mydialog.buttons(!0,!0,"Aceptar","mydialog.close()",!0,!0),mydialog.center()):($(".reg-login .registro #RegistroForm").html(s.substring(strpos(s,":")+2)),$(".reg-login .registro #buttons").remove());break;case"2":registro.dialog?(mydialog.body(s.substring(strpos(s,":")+2)),mydialog.buttons(!0,!0,"Aceptar","redireccionar()",!0,!0),mydialog.center()):($(".reg-login .registro #RegistroForm").html(s.substring(strpos(s,":")+2)),$(".reg-login .registro #buttons").remove())}$("#loading").fadeOut(350)},error:function(){mydialog.error_500("registro.submit()"),$("#loading").fadeOut(350)},complete:function(){registro.dialog&&mydialog.procesando_fin(),$("#loading").fadeOut(450)}})}};